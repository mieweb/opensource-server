#!/usr/bin/env bash
# Nginx instance configuration for pull-config

# Site ID for this configuration
SITE_ID=1

# Configuration file to manage
export CONF_FILE=/etc/nginx/nginx.conf

# URL to fetch configuration from
export CONF_URL=http://localhost:3000/sites/${SITE_ID}/nginx.conf

# Command to test configuration validity before applying
export TEST_COMMAND="nginx -t"

# Command to reload the service
export RELOAD_COMMAND="nginx -s reload"

# Fallback service name for systemctl (if RELOAD_COMMAND fails)
export SERVICE_NAME="nginx"

# Execute pull-config
exec /opt/opensource-server/pull-config/bin/pull-config

